---
title: "Direct3D : 벡터 대수"
excerpt: "벡터의 다양한 특성들"
toc: true
toc_sticky: true
toc_label: "목차"
categories:
  - Direct3D
tags:
  - [CPP, Direct3D]
date: 2021-08-10
breadcrumb: true
---

# 1. 벡터 대수

## 1.1 벡터

벡터(방향량)는 크기와 방향을 모두 가진 수량을 가리키는 말이다. 공식적으로는 벡터값 수량(vector-valued quantity)이라고 부르는데 예로 힘, 변위, 속도가 있다. 따라서 벡터는 힘이나 변위, 속도를 나타내는데 사용된다. 

### 1.1.1 벡터와 좌표계

벡터에 대한 유용한 기하학 연산을 정의해보자. 그런데 컴퓨터는 벡터들을 기하학적으로 다루지 못하므로, 벡터들을 수치적으로 지정하는 방법이 필요하다.  그러면 하나의 벡터를 나타내는 화살표의 끝 좌표로 규정할 수 있으며 ***v = (x, y, z)***로 표기할 수 있다. 이 값은 프로그램에서 부동소수점 값 세 개로 표현할 수 있다. 

3차원 컴퓨터 그래픽에서는 여러 개의 기준계를 사용하는 경우가 많으므로, 벡터를 다룰 때에는 주어진 벡터의 좌표가 현재 어떤 기준계에 상대적인지를 기억할 필요가 있다. 또한, 한 기준계에서의 벡터 좌표를 다른 기준계로 변환하는 방법도 알아야한다.

### 1.1.2 왼손잡이 좌표계 vs 오른족잡이 좌표계

Direct3D는 소위 왼손잡이 좌표계를 사용한다. 


![/assets/images/posts/2021-08-10/direct3d_1/Untitled.png](/assets/images/posts/2021-08-10/direct3d_1/Untitled.png)

### 1.1.3 기본적인 벡터 연산들

벡터의 상등, 덧셈, 스칼라 곱셈, 뺄셈의 정의를 해보자. 아래 네 가지 정의 에서 두 벡터는  $u= (u_x,u_y,u_z), v =(v_x, v_y, v_z)$ 이다.

1. 상등 : 두 벡터의 대응되는 좌표성분들이 상등이면, $u_x = v_x, u_y = v_y, u_z = v_z$ 일때만 $u = v$이다.
2. 덧셈 : 벡터 덧셈은 성분 별로 이루어진다. $u+v = (u_x+v_x, u_y+v_y, u_z+v_z)$이다. 이러한 정의 에서 벡터 덧셈은 같은 차원의 벡터들끼리만 가능하다.
3. 스칼라 곱셈 : 벡터에 스칼라를 곱할 수 있으며, 그 결과는 벡터이다. $k$가 하나의 스칼라라고 할때, $ku = (ku_x, ku_y, ku_z)$이다.
4. 뺄셈 : 벡터 뺄셈은 벡터 덧셈과 스칼라 곱셈을 통해 정의된다. 구체적으로 $u-v = u+(-1*v) = u+(-v) = (u_x-v_x, u_y-v_y, u_z-v_z)$이다.

## 1.2 길이와 단위벡터

기하학적으로 한 벡터의 크기는 해당 지향 선분의 길이이다. 3차원 벡터의 크기는 피타고라스 정리를 두번 적용해서  계산할 수 있다. 

$$||u|| = \sqrt{x^2+y^2+z^2}$$

벡터를 순전히 방향을 나타내는 용도로만 사용하는 경우에는 벡터의 길이가 중요하지 않다. 방향 전용의 벡터는 길이를 정확히 1로 맞추어 두면 편리하다. 크기가 1인 벡터를 단위벡터라 부르고 , 임의의 벡터를 단위 벡터로 만드는 것을 정규화(normalization)라고 한다. 벡터의 각 성분을 벡터의 그기로 나누면 벡터가 정규화 된다.

## 1.3 내적

점곱(dot droduct)이라고도 부르는 내적(inner product)은 스칼라값을 내는 벡터 곱셈의 일종이다. 결과가 스칼라라서 스칼라 곱이라고 부르기도 한다. $u= (u_x,u_y,u_z), v =(v_x, v_y, v_z)$이라고 할때 내적은 다음과 같이 정의된다.

$$u*v = u_xv_x+u_yv_y+u_zv_z$$

다른 말로 하면 내적은 대응되는 성분들의 곱의 합이다.

코사인 법칙을 적용하면 특정 결론이 나오는데  두 벡터의 내적이 두 벡터 사이의 각도의 코사인을 벡터 크기로 비례한 것임이 나온다. 두 벡터가 단위벡터일 경우 두 벡터 사이의 각도의 코사인이다.

이로부터 내적의 유용한 기하학적 속성 몇가지가 나온다.

1. 만일 $u*v =0$이면, 두 벡터는 직교한다.
2. 만일 결과가 0보다 크면, 두 벡터는 예각을 이룬다.
3. 만일 결과가 0보다 작으면, 두벡터는 둔각을 이룬다.

### 1.3.1 직교화

벡터 집합이 단위 길이이고 서로 직교일때, 그러한 벡터 집합을 정규직교(orthonormal)집합이라고 부른다. 정규직교에 가깝지만 정규직교는 아닌 경우 그런 벡터 집합을 적규직교벡터 집합으로 만드는 것을 직교화(orthogonalization)라고 한다. 3차원 컴퓨터 그래픽에서는 정규직교 집합으로 시작했지만 수치 정밀도 문제로 점차 벗어나는 경우가있다. 

## 1.4 외적

또 다른 벡터 곱셈으로 가위곱(cross product) 또는 외적(outer product)이라는 것이있다. 결과가 스칼라인 내적과 달리 외적의 결과는 벡터이다. 그리고 외적은 오직 3차원 벡터에 대해서만 정의된다.  두 3차원 벡터 $u$와  $v$의 외적을 취하면  $u$와  $v$ 모두에 직교인 또 다른 벡터 w가 나온다. 즉, 결과로 나온 벡터는 앞서 나온 두 벡터 하나하나에 모두 직교이다.  $u= (u_x,u_y,u_z), v =(v_x, v_y, v_z)$이라고 할때 외적은 다음과 같이 정의된다.

$$w= u * v = (u_yv_z-u_zv_y,u_zv_x-u_xv_z,u_xv_y-u_yv_x)$$

### 1.4.1 2차원 유사 외적

외적을 이용하면 주어진 두 3차원 벡터에 직교인 벡터를 구할 수있다. 특별한 경우를 제외할 때, 2차원에서는 두 벡터에 수직인 벡터는 없지만 하나의 벡터에 수직인 벡터는 얼마든 구할수 있다.

$$u*v = (u_x,u_y)*(-u_xu_y) = -u_xu_y+u_yu_x = 0$$

이므로 $u$와 $v$는 직교이다. 그리고 $u$와 $-v$도 직교이기도 하다.

### 1.4.2 외적을 이용한 직교화

3차원의 경우 정규직교에 가깝지만 수치 정밀도 오차의 누적으로 완전한 정규직교는 아닌 벡터 집합$\{v_0, v_1, v_2\}$를 직교화하는 또다른 공정이 존재한다. 

1. $w_0= {v_0\over||v_0||}$으로 설정한다.
2. $w_2= {w_0 * v_1\over||w_0*v_1||}$로 설정한다.
3. $w_1 = w_2*w_0$으로 설정한다.

이렇게 설정하면 $w_2$와 $w_0$은 직교이고 두 벡터의 길이는 1로 동일하므로 두 벡터의 외적도 1이다 따라서 더 이상의 정규화는 필요없고 벡터 집합$\{w_0, w_1, w_2\}$는 정규직교이다.