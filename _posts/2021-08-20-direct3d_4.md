---
title: "Direct3D : Direct3D의 초기화"
excerpt: "기본 지식"
toc: true
toc_sticky: true
toc_label: "목차"
categories:
  - Direct3D
tags:
  - [CPP, Direct3D]
date: 2021-08-20
breadcrumb: true
---

# 4. Direct3D의 초기화

## 4.1 Direcr3D의 기본 지식

Direct3D 초기화 공정에 앞서서 기본적인 그래픽 개념과 Direct3D 형식들을 알아보자.

### 4.1.1 Direct3D 12의 개요

 Direct3D는 GPU를 제어하고 프로그래밍하는 데 사용되는 저수준 그래픽 API이다. 이를 통해 응용 프로그램은 3차우너 그래픽 가속 기능을 이용해서 3차원 세계를 렌더링 할 수 있게 된다. 응용 프로그램과 그래픽 하드웨어 사이에 Direct3D라는 간접층과 하드웨어 드라이버가 Direct3D 명령들을 시스템의 GPU가 직접 이해하는 고유한 기계어 명령들로 번역해줘서 사용하는 GPU가 다이렉트X를 지원하는 이상, 응용 프로그램 개발자는 GPU의 세부사항을 고려할 필요가 없다.

 Direct3D 12는 이전 버전에 비해서 훨씬 낮은 수준의 API가 되었으면, 추상화가 더 줄어들게되고 개발자가 손수 관리해야 할 사항들이 늘어났으며, GPU 구조에 더 밀접하게 반영한다. API 사용 난이도는 올라갔지만 성능이 더 개선된 셈이다.

### 4.1.2 COM

 COM(Component Object Model)은 다이렉트X의 프로그래밍 언어 독립성과 하위 호환성을 가능하게 하는 기술 이다. COM 객체를 흔히 COM 인터페이스라고 부르지만, C++ 클래스로 간주하고 사용해도 무방하다. 프로그래머가 사용하는 부분은 필요한 COM 인터페이스를 가리키는 포인터를 특별한  함수를 사용하거나, 다른 COM 인터페이스의 메서드를 이용해서 얻는 방법뿐이다. 또한 COM 인터페이스를 C++의 new 키워드로 생성할 필요가 없고, 사용한 이후에는 Release를 통해 메모리를 해제 시켜줘야한다.

 COM 객체의 수명관리를 돕기 위해, Windows 런타임 라이브러리는 ComPtr이라는 클래스를 제공한다. 이 클래스는 COM 객체를 위한 똑똑한 포인터라 할 수 있다. 범위를 벗어난 ComPtr 인스턴스는 바탕 COM 객체에 대해 자동으로 Release를 호출하여 프로그래머가 따로 호출할 필요가 없다.

 주로 사용하는 ComPtr의 메서드는 아래 세 가지 이다.

 

1. Get : 바탕 COM 인터페이스를 가리키는 포인터를 돌려준다. 해당 COM 인터페이스 포인터 형식의 인수를 받는 함수를 호출할 때 흔히 쓰인다.
2. GetAddressOf : 바탕 COM 인터페이스를 가리키는 포인터의 주소를 돌려준다. 함수 매개변수를 통하여 COM 인터페이스 포인터를 돌려받을 때 흔히 쓰인다. 
3. Reset : ComPtr 인스턴스를 nullptr로 설정하고 COM 인터페이스의 참조 횟수를 1 감소시킨다. 

### 4.1.3 텍스쳐 형식