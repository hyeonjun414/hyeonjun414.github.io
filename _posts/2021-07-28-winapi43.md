---
title: "WinAPI : UI & 마우스2"
excerpt: "인터페이스 구성 및 출력"
toc: true
toc_sticky: true
toc_label: "목차"
categories:
  - WinAPI
tags:
  - [CPP, WinAPI]
date: 2021-07-28
breadcrumb: true
---

# 43강. UI & 마우스2

## 마우스 충돌 처리

버튼은 사각형 충돌체를 가지고 있다. 마우스는 포인트 충돌체를 가지고 있어야 버튼과의 충돌을 처리할 수 있게된다.

### 포인트 충돌체

포인트 충돌체는 오브젝트가 가리키는 한 픽셀에서 충돌을 처리하는 방법을 사용한다. 다른 충돌체가 영역을 탐색하는 것과 달리 한 점에 대해서만 처리를 하면 되기에 연산량이 많지 않다.

```csharp
protected:
	POSITION m_tDist; // 오브젝트와의 거리
	POSITION m_tPos; // 실질적인 충돌체의 위치

public:
	POSITION GetPoint() const
	{
		return m_tPos;
	}

public:
	void SetDistance(float x, float y)
	{
		m_tDist.x = x;
		m_tDist.y = y;
	}
	void SetDistance(const POSITION& tDist)
	{
		m_tDist = tDist;
	}
```

한 점만 확인을 하기 때문에 크기는 필요없고 연결된 오브젝트와의 거리와 충돌체 자체의 위치만 고려하면 된다.

충돌체의 위치는 LateUpdate 부분에서 구해준다.

```csharp
int ColliderPoint::LateUpdate(float fDeltaTime)
{
	Collider::LateUpdate(fDeltaTime);

	POSITION tPos = m_pObj->GetPos();
	m_tPos.x = tPos.x + m_tDist.x;
	m_tPos.y = tPos.y + m_tDist.y;

	return 0;
}
```

### 마우스에 포인트 충돌체 추가

```csharp
ColliderPoint* pColl = AddCollider<ColliderPoint>("Mouse");
SAFE_RELEASE(pColl);
```

### 충돌 CallBack 함수

충돌처리를 위해서 마우스와 버튼 클래스에 Hit 함수를 만들어준다.

```csharp
void Hit(class COllider* pSrc, class Collider* pDest, float fDeltiTime);
```

현재 버튼 UI는 StartSecne에서 만들어주고 있다. 충돌체 설정하는 부분도 StartScene에서 처리를 하는데 추가적으로 충돌함수를 만들어줘야한다. 버튼에 마우스가 들어올때와 나갈때 수행하는 함수를 추가한다.

```csharp
void MouseOn(class Collider* pSrc, class Collider* pDest, float fDeltiTime);
void MouseOut(class Collider* pSrc, class Collider* pDest, float fDeltiTime);
```

버튼은 종류에 따라 다른 기능을 수행해야한다. Start 버튼은 무언가 시작을, End 버튼은 무언가 종료하는 것 처럼 말이다.

### 마우스 상태

### 스타트씬에 필요한 함수 추가

버튼을 통해 스타트씬에서 사용된 함수를 추가한다. 다음 장면으로 넘어가거나, 프로그램을 종료하는 등의 기능을 추가하는 부분이다.

```csharp

void DestroyGame()
{
		DestroyWindow(m_hWnd);
}
```