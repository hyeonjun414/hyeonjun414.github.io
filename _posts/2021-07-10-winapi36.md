---
title: "WinAPI : 애니메이션"
excerpt: "애니메이션 구조와 설계"
toc: true
toc_sticky: true
toc_label: "목차"
categories:
  - WinAPI
tags:
  - [CPP, WinAPI]
date: 2021-07-10
breadcrumb: true
---


# 36~37강. 애니메이션

## 애니메이션 클래스

### 애니메이션 설계

애니메이션은 오브젝트마다 가지고 있도록 만든다.

기본적으로 2D 애니메이션은 sprite를 통해 구현된다. 이미지를 프레임 단위로 실행시켜 동작을 보여주는 방식이다.

Animation 클래스를 만들어준다. 기본적으로 Ref 클래스를 상속받는다.

flag에 애니메이션을 실행시키기위한 sprite가 어떤 형태로 제공되고 있는지, 애니메이션을 어떤 형태로 실행할지를 나타내기위한 열거형 변수를 만들어준다.

```csharp
// 애니메이션 종류
enum ANIMATION_TYPE
{
	AT_ATLAS,
	AT_FRAME,
	AT_END
};

// 애니메이션 옵션
enum ANIMATION_OPTION
{
	AO_LOOP, // 반복 재생(ex 기본 자세)
	AO_ONCE_RETURN, // 한번 돌고 기본 자세로 돌아감
	AO_ONCE_DESTROY, // 한번 돌고 오브젝트를 삭제 (ex 이펙트)
	AO_TIME_RETURN, // 일정 시간 돌고 기본 자세로 돌아감
	AO_TIME_DESTROY // 일정 시간 돌고 사라짐
};
```

그리고 애니메이션 클립을 구조체로 만들어줘서 애니메이션 모션에 대한 정보를 저장하도록 만든다.

```csharp
typedef struct _tagAnimationClip
{
	ANIMATION_TYPE	eType; // 애니메이션 제공 타입
	ANIMATION_OPTION eOption; // 애니메이션 실행 옵션
	vector<class Texture*> vecTexture; // 사용되는 애니메이션 텍스쳐
	float	fAnimationTime; //프레임마다 도는 시간
	float	fAnimationLimitTime; // 애니메이션 모션 총 실행시간
	// sprite상의 어떤 위치의 이미지를 실행시킬지
	int		iFrameX;
	int		iFrameY;
	// 아틀라스상에서의 sprite 최대 개수
	int		iFrameMaxX;
	int		iFrameMaxY;
	// 해당 아틀라스상에서 현재 클립의 이미지 위치
	int		iStartX;
	int		iStartY;
	// 현재 클립의 이미지 위치에서 어디까지가 해당 모션인지
	int		iLengthX;
	int		iLengthY;
	// 제한시간(Time Option)
	float	fOptionTime;
	float	fOptionLimitTime;

}ANIMATIONCLIP, *PANIMATIONCLIP;
```

### 애니메이션 클래스