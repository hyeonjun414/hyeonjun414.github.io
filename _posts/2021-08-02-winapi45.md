---
title: "WinAPI : 타일"
excerpt: "오브젝트 출력 제외 및 타일과 스크롤"
toc: true
toc_sticky: true
toc_label: "목차"
categories:
  - WinAPI
tags:
  - [CPP, WinAPI]
date: 2021-08-02
breadcrumb: true
---

# 45~46강. 오브젝트 출력 제외 및 타일과 스크롤

## 오브젝트 출력 제외

화면 밖으로 빠져나가는 오브젝트는 출력부분에서 빼내야한다. 렌더를 하기 전에 확인하는 작업이 필요한데 Obj 클래스에서 해당 부분을 처리해줄 수 있다.  렌더 부분에서 렌더링을 할 오브젝트의 위치를 먼저 구하고, 위치가 클라이언트 해상도를 완전히 벗어나게 되면 출력에서 제외시키는 것이다.

```csharp
void Obj::Render(HDC hDC, float fDeltaTime)
{
	POSITION tPos = m_tPos - m_tSize * m_tPivot;
	tPos -= GET_SINGLE(Camera)->GetPos();
	RESOLUTION tClientRS = GET_SINGLE(Camera)->GetClientRS();

	bool bInClient = true;

	//오브젝트 영역확인
	if (tPos.x + m_tSize.x < 0)
		bInClient = false;
	else if (tPos.x > tClientRS.iW)
		bInClient = false;
	else if (tPos.y + m_tSize.y < 0)
		bInClient = false;
	else if (tPos.y > tClientRS.iH)
		bInClient = false;

	if (m_pTexture && bInClient)
	{
	...
	... 출력
```

충돌체 출력도 마찬가지 이다. bInClient를 확인하여 true일 경우, 즉 오브젝트가 화면 밖으로 나가지 않은 경우만 출력하도록 한다.

## 타일

지금은 한 개의 큰 이미지를 가져와 배경으로 사용하고 있지만, 너무 큰 이미지를 사용하면 지원을 하지 않거나 성능이 지장이 갈 수도 있다. 그래서 작은 이미지를 연결해 놓는 타일 구조를 사용한다.

### 타일 구조 설계

타일은 Stage에서 관리된다.